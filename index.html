<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treasury Mini Game V2</title>
    <style>
        :root {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --accent: #ff9800; /* Orange/Gold */
            --text-color: #ffffff;
            --success: #4caf50;
            --danger: #f44336;
            --rare-common: #b0bec5;
            --rare-epic: #9c27b0;
            --rare-legendary: #ffd700;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            user-select: none;
            padding-bottom: 50px;
        }

        /* HEADER */
        header {
            width: 100%;
            background: var(--card-bg);
            padding: 15px 0;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .balance-container {
            font-size: 24px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .coin-icon-small {
            width: 30px;
            height: 30px;
            background: radial-gradient(circle, #ffb74d 0%, #ff9800 100%);
            border-radius: 50%;
            border: 2px solid #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
        }

        .currency { color: var(--accent); }

        /* MAIN CONTENT */
        main {
            width: 90%;
            max-width: 600px;
            padding: 20px 0;
            flex-grow: 1;
        }

        .section-title {
            margin-top: 35px;
            margin-bottom: 15px;
            font-size: 22px;
            border-left: 5px solid var(--accent);
            padding-left: 15px;
            font-weight: bold;
        }

        /* --- –ù–û–í–ê –°–ï–ö–¶–Ü–Ø –ü–û–®–£–ö–£ --- */
        .search-container {
            position: relative;
            width: 100%;
            height: 250px;
            background-image: url('https://placehold.co/600x300/2c2c2c/aaaaaa?text=üó∫Ô∏è+–ú–ê–ü–ê+–°–ö–ê–†–ë–Ü–í+(–¢–∏—Å–Ω–∏!)'); /* –ó–∞–≥–ª—É—à–∫–∞ –º–∞–ø–∏ */
            background-size: cover;
            background-position: center;
            border-radius: 15px;
            border: 3px solid #444;
            cursor: pointer;
            overflow: hidden;
            transition: border-color 0.3s;
        }

        .search-container:hover { border-color: var(--accent); }

        .search-container.searching {
            animation: shake 0.5s infinite;
        }

        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }

        .search-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            display: none; /* –•–æ–≤–∞—î–º–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º */
            justify-content: center;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            color: var(--accent);
        }

        .found-code-area {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            text-align: center;
            display: none; /* –•–æ–≤–∞—î–º–æ —è–∫—â–æ –∫–æ–¥—É –Ω–µ–º–∞—î */
            border: 2px dashed var(--success);
        }

        .code-text {
            font-family: monospace;
            font-size: 28px;
            color: var(--accent);
            letter-spacing: 2px;
            font-weight: bold;
            user-select: text; /* –î–æ–∑–≤–æ–ª—è—î–º–æ –∫–æ–ø—ñ—é–≤–∞—Ç–∏ –∫–æ–¥ */
        }

        .redemption-form {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .code-input {
            flex-grow: 1;
            padding: 12px;
            border-radius: 10px;
            border: none;
            background: #333;
            color: white;
            font-size: 16px;
            text-align: center;
        }
        .code-input:focus { outline: 2px solid var(--accent); }

        .activate-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 0 25px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
        }
        .activate-btn:active { transform: scale(0.95); }

        /* TAP ZONE */
        .tap-zone {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }

        .coin-btn {
            width: 140px; height: 140px;
            background: radial-gradient(circle, #ffb74d 0%, #ff9800 100%);
            border-radius: 50%;
            border: 5px solid #fff;
            box-shadow: 0 0 25px var(--accent);
            cursor: pointer;
            display: flex;
            align-items: center; justify-content: center;
            font-size: 32px; font-weight: bold;
            color: #fff; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .coin-btn:active { transform: scale(0.92); }

        /* CONTAINERS */
        .containers-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .chest-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid #333;
            transition: transform 0.2s;
            cursor: pointer;
        }
        .chest-card:hover { transform: translateY(-5px); border-color: var(--accent); }
        .chest-icon { font-size: 40px; margin-bottom: 10px; }
        .price { color: var(--success); font-weight: bold; }

        /* GIVEAWAY */
        .giveaway-banner {
            background: linear-gradient(135deg, #6a1b9a, #1565c0);
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(106, 27, 154, 0.4);
        }
        .timer { font-size: 32px; font-weight: bold; font-family: monospace; margin: 15px 0; }
        .claim-btn {
            background: #fff; color: #333; border: none;
            padding: 12px 30px; border-radius: 25px;
            font-weight: bold; cursor: pointer; opacity: 0.5; pointer-events: none;
            font-size: 16px; transition: all 0.3s;
        }
        .claim-btn.active { opacity: 1; pointer-events: all; box-shadow: 0 0 20px #fff; background: var(--accent); color: white;}

        /* INVENTORY */
        .inventory-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
            gap: 12px;
        }
        .item {
            background: #2c2c2c; padding: 15px 10px; border-radius: 12px;
            text-align: center; font-size: 13px;
        }
        .item.legendary { border: 2px solid var(--rare-legendary); box-shadow: inset 0 0 10px var(--rare-legendary); }
        .item.epic { border: 2px solid var(--rare-epic); }
        .item.common { border: 2px solid var(--rare-common); }

        /* MODAL */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 1000;
            justify-content: center; align-items: center;
        }
        .modal-content {
            background: var(--card-bg); padding: 40px; border-radius: 25px;
            text-align: center; width: 85%; max-width: 320px;
            border: 2px solid var(--accent);
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .win-item-name { font-size: 26px; margin: 20px 0; font-weight: bold; }
        .close-btn { background: var(--accent); border: none; color: white; padding: 12px 30px; border-radius: 25px; cursor: pointer; font-size: 16px; font-weight: bold;}

    </style>
</head>
<body>

    <header>
        <div class="balance-container">
            <div class="coin-icon-small">$</div>
            <span id="balance">0</span> <span class="currency">T-Coins</span>
        </div>
    </header>

    <main>
        <h3 class="section-title">üó∫Ô∏è –ü–æ—à—É–∫ –°–∫–∞—Ä–±—ñ–≤</h3>
        <p style="color: #aaa; font-size: 14px; margin-bottom: 10px;">–¢–∏—Å–Ω–∏ –Ω–∞ –º–∞–ø—É, —â–æ–± –∑–Ω–∞–π—Ç–∏ –∑–∞—Ö–æ–≤–∞–Ω–∏–π –∫–æ–¥!</p>
        
        <div class="search-container" id="searchMap" onclick="startSearching()">
            <div class="search-overlay" id="searchOverlay">
                üîç –®—É–∫–∞—î–º–æ —Å—Ö–æ–≤–∞–Ω–∫—É...
            </div>
        </div>

        <div class="found-code-area" id="foundCodeArea">
            <div>–ó–Ω–∞–π–¥–µ–Ω–æ —Å–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–æ–¥:</div>
            <div class="code-text" id="foundCodeText"></div>
            <div style="font-size: 12px; color: #aaa;">(–°–∫–æ–ø—ñ—é–π –π–æ–≥–æ —Ç–∞ –≤–≤–µ–¥–∏ –Ω–∏–∂—á–µ)</div>
        </div>

        <div class="redemption-form">
            <input type="text" class="code-input" id="codeInput" placeholder="–í–≤–µ–¥–∏ –∫–æ–¥ —Ç—É—Ç...">
            <button class="activate-btn" onclick="redeemCode()">–ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏</button>
        </div>

        
        <h3 class="section-title">üëÜ –ú–∞–π–Ω—ñ–Ω–≥</h3>
        <div class="tap-zone">
            <div class="coin-btn" onclick="tap()" id="tapBtn">TAP!</div>
        </div>
        

        <h3 class="section-title">üî• –ì–ª–æ–±–∞–ª—å–Ω–∏–π –†–æ–∑—ñ–≥—Ä–∞—à</h3>
        <div class="giveaway-banner">
            <div>–î–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –¥—Ä–æ–ø—É:</div>
            <div class="timer" id="timer">00:00:00</div>
            <button class="claim-btn" id="claimBtn" onclick="claimGiveaway()">–ó–ê–ë–†–ê–¢–ò –ü–†–ò–ó</button>
        </div>

        <h3 class="section-title">üì¶ –ú–∞–≥–∞–∑–∏–Ω –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤</h3>
        <div class="containers-grid">
            <div class="chest-card" onclick="openContainer('basic')">
                <div class="chest-icon">üéí</div>
                <h4>–ù–æ–≤–∞—á–æ–∫</h4>
                <p>–®–∞–Ω—Å –Ω–∞ –¥—Ä—ñ–±–Ω–∏—Ü—ñ</p>
                <div class="price">100 Coins</div>
            </div>
            <div class="chest-card" onclick="openContainer('elite')">
                <div class="chest-icon">üíé</div>
                <h4>–ú–∞–∂–æ—Ä</h4>
                <p>–¢–æ–ø –ª—É—Ç</p>
                <div class="price">500 Coins</div>
            </div>
        </div>

        <h3 class="section-title">üéí –¢–≤—ñ–π –Ü–Ω–≤–µ–Ω—Ç–∞—Ä</h3>
        <div class="inventory-list" id="inventory">
            </div>
    </main>

    <div class="modal" id="winModal">
        <div class="modal-content">
            <h2 id="modalTitle">–í–∏ –æ—Ç—Ä–∏–º–∞–ª–∏!</h2>
            <div id="winIcon" style="font-size: 60px;">üéÅ</div>
            <div class="win-item-name" id="winName">–ü—Ä–µ–¥–º–µ—Ç</div>
            <button class="close-btn" onclick="closeModal()">–ö—Ä—É—Ç–æ!</button>
        </div>
    </div>

    <script>
        // --- –î–ê–ù–Ü ---
        let balance = parseInt(localStorage.getItem('treasury_balance')) || 50; // –î–∞—î–º–æ 50 –º–æ–Ω–µ—Ç –¥–ª—è —Å—Ç–∞—Ä—Ç—É
        let inventory = JSON.parse(localStorage.getItem('treasury_inventory')) || [];
        let usedCodes = JSON.parse(localStorage.getItem('treasury_used_codes')) || [];

        // –°–ø–∏—Å–æ–∫ –º–æ–∂–ª–∏–≤–∏—Ö –∫–æ–¥—ñ–≤ –¥–ª—è –∑–Ω–∞—Ö—ñ–¥–∫–∏
        const possibleCodes = ['FIND_100', 'SECRET_250', 'MAP_LUCK_500', 'TREASURE_50'];
        
        // –ë–∞–∑–∞ –≤–∞–ª—ñ–¥–Ω–∏—Ö –∫–æ–¥—ñ–≤ —Ç–∞ —ó—Ö –Ω–∞–≥–æ—Ä–æ–¥–∏
        const validCodesDb = {
            'FIND_100': 100,
            'SECRET_250': 250,
            'MAP_LUCK_500': 500,
            'TREASURE_50': 50,
            'ADMIN_BONUS': 1000 // –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É, —è–∫–∏–π –Ω–µ –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ –Ω–∞ –º–∞–ø—ñ, –∞–ª–µ –º–æ–∂–Ω–∞ –≤–≤–µ—Å—Ç–∏
        };
        
        const items = [
            { name: "–°—Ç–∞—Ä–∏–π –ß–µ–∫", icon: "üßæ", rarity: "common" },
            { name: "–ö–∞–≤–∞", icon: "‚òï", rarity: "common" },
            { name: "–°—Ç—ñ–∫–µ—Ä–ø–∞–∫", icon: "üëæ", rarity: "common" },
            { name: "Telegram Star", icon: "‚≠ê", rarity: "epic" },
            { name: "–ù–∞–≤—É—à–Ω–∏–∫–∏", icon: "üéß", rarity: "epic" },
            { name: "–°–º–∞—Ä—Ç-–≥–æ–¥–∏–Ω–Ω–∏–∫", icon: "‚åö", rarity: "epic" },
            { name: "iPhone 15 Pro", icon: "üì±", rarity: "legendary" },
            { name: "–ö–ª—é—á—ñ –≤—ñ–¥ Tesla", icon: "üöó", rarity: "legendary" },
            { name: "Bitcoin", icon: "‚Çø", rarity: "legendary" }
        ];

        // --- –û–°–ù–û–í–ù–Ü –§–£–ù–ö–¶–Ü–á ---

        function updateUI() {
            document.getElementById('balance').innerText = balance;
            renderInventory();
            localStorage.setItem('treasury_balance', balance);
            localStorage.setItem('treasury_inventory', JSON.stringify(inventory));
            localStorage.setItem('treasury_used_codes', JSON.stringify(usedCodes));
        }

        function tap() {
            const earned = 5;
            balance += earned;
            const btn = document.getElementById('tapBtn');
            btn.innerText = "+" + earned;
            setTimeout(() => btn.innerText = "TAP!", 150);
            updateUI();
        }

        // --- –ù–û–í–ê –õ–û–ì–Ü–ö–ê: –ü–û–®–£–ö –¢–ê –ö–û–î–ò ---

        let isSearching = false;

        function startSearching() {
            if (isSearching) return; // –ó–∞–ø–æ–±—ñ–≥–∞—î–º–æ –ø–æ–≤—Ç–æ—Ä–Ω–∏–º –∫–ª—ñ–∫–∞–º –ø—ñ–¥ —á–∞—Å –ø–æ—à—É–∫—É
            isSearching = true;

            const mapElement = document.getElementById('searchMap');
            const overlay = document.getElementById('searchOverlay');
            const foundArea = document.getElementById('foundCodeArea');

            // –•–æ–≤–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            foundArea.style.display = 'none';
            
            // –ó–∞–ø—É—Å–∫–∞—î–º–æ –∞–Ω—ñ–º–∞—Ü—ñ—é
            mapElement.classList.add('searching');
            overlay.style.display = 'flex';

            // –°–∏–º—É–ª—è—Ü—ñ—è –ø–æ—à—É–∫—É (2 —Å–µ–∫—É–Ω–¥–∏)
            setTimeout(() => {
                mapElement.classList.remove('searching');
                overlay.style.display = 'none';
                isSearching = false;

                // –õ–æ–≥—ñ–∫–∞ –∑–Ω–∞—Ö—ñ–¥–∫–∏ (50% —à–∞–Ω—Å)
                if (Math.random() > 0.5) {
                    // –ó–Ω–∞–π—à–ª–∏ –∫–æ–¥!
                    const randomCode = possibleCodes[Math.floor(Math.random() * possibleCodes.length)];
                    document.getElementById('foundCodeText').innerText = randomCode;
                    foundArea.style.display = 'block';
                    // –û—á–∏—â–∞—î–º–æ –ø–æ–ª–µ –≤–≤–æ–¥—É, —â–æ–± –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤—ñ–≤ –Ω–æ–≤–∏–π –∫–æ–¥
                    document.getElementById('codeInput').value = '';
                    showCustomModal("üéâ –£—Å–ø—ñ—Ö!", "üó∫Ô∏è", "–í–∏ –∑–Ω–∞–π—à–ª–∏ —Å–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–æ–¥ –Ω–∞ –º–∞–ø—ñ! –°–∫–æ–ø—ñ—é–π—Ç–µ –π–æ–≥–æ.");
                } else {
                    // –ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π—à–ª–∏
                    showCustomModal("–ü—É—Å—Ç–æ...", "üï∏Ô∏è", "–°—å–æ–≥–æ–¥–Ω—ñ —Ç—É—Ç –Ω—ñ—á–æ–≥–æ –Ω–µ–º–∞—î. –°–ø—Ä–æ–±—É–π—Ç–µ –ø—ñ–∑–Ω—ñ—à–µ.");
                }

            }, 2000);
        }

        function redeemCode() {
            const input = document.getElementById('codeInput');
            const code = input.value.trim().toUpperCase();

            if (code === "") {
                showCustomModal("–ü–æ–º–∏–ª–∫–∞", "‚ö†Ô∏è", "–í–≤–µ–¥—ñ—Ç—å –∫–æ–¥ —É –ø–æ–ª–µ.");
                return;
            }

            if (usedCodes.includes(code)) {
                 showCustomModal("–ü–æ–º–∏–ª–∫–∞", "üö´", "–¶–µ–π –∫–æ–¥ –≤–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ!");
                 return;
            }

            if (validCodesDb.hasOwnProperty(code)) {
                const reward = validCodesDb[code];
                balance += reward;
                usedCodes.push(code); // –î–æ–¥–∞—î–º–æ –¥–æ —Å–ø–∏—Å–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏—Ö
                
                updateUI();
                input.value = ""; // –û—á–∏—Å—Ç–∏—Ç–∏ –ø–æ–ª–µ
                document.getElementById('foundCodeArea').style.display = 'none'; // –°—Ö–æ–≤–∞—Ç–∏ –∑–Ω–∞–π–¥–µ–Ω–µ
                showCustomModal("–ö–æ–¥ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ!", "üí∞", `–í–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ +${reward} T-Coins!`);
            } else {
                showCustomModal("–ù–µ–≤–¥–∞—á–∞", "‚ùå", "–ù–µ–≤—ñ—Ä–Ω–∏–π –∫–æ–¥.");
            }
        }


        // --- –ö–û–ù–¢–ï–ô–ù–ï–†–ò –¢–ê –Ü–ù–í–ï–ù–¢–ê–† ---

        function openContainer(type) {
            let cost = type === 'basic' ? 100 : 500;
            if (balance < cost) {
                showCustomModal("–ù–µ –≤–∏—Å—Ç–∞—á–∞—î –º–æ–Ω–µ—Ç", "üí∏", "–¢–∞–ø–∞–π –∞–±–æ —à—É–∫–∞–π –∫–æ–¥–∏ –Ω–∞ –º–∞–ø—ñ!");
                return;
            }
            balance -= cost;
            
            let rarityPool = type === 'basic' ? ['common', 'common', 'common', 'epic'] : ['epic', 'epic', 'legendary'];
            let rarity = rarityPool[Math.floor(Math.random() * rarityPool.length)];
            let winItem = getRandomItemByRarity(rarity);

            inventory.push(winItem);
            updateUI();
            showWin(winItem);
        }

        function getRandomItemByRarity(rarity) {
            const filtered = items.filter(i => i.rarity === rarity);
            return filtered[Math.floor(Math.random() * filtered.length)];
        }

        // --- –ú–û–î–ê–õ–¨–ù–Ü –í–Ü–ö–ù–ê ---

        function showWin(item) {
            document.getElementById('modalTitle').innerText = "–í–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ –∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞!";
            document.getElementById('winName').innerText = item.name;
            document.getElementById('winName').className = "win-item-name " + item.rarity;
            document.getElementById('winIcon').innerText = item.icon;
            document.getElementById('winModal').style.display = "flex";
        }

        // –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (–∫–æ–¥–∏, –ø–æ–º–∏–ª–∫–∏)
        function showCustomModal(title, icon, text) {
             document.getElementById('modalTitle').innerText = title;
             document.getElementById('winIcon').innerText = icon;
             document.getElementById('winName').innerText = text;
             document.getElementById('winName').className = "win-item-name"; // —Å–∫–∏–¥–∞—î–º–æ –∫–æ–ª—ñ—Ä —Ä—ñ–¥–∫–æ—Å—Ç—ñ
             document.getElementById('winModal').style.display = "flex";
        }

        function closeModal() {
            document.getElementById('winModal').style.display = "none";
        }

        function renderInventory() {
            const container = document.getElementById('inventory');
            container.innerHTML = "";
            if(inventory.length === 0) {
                container.innerHTML = "<p style='color:#666; grid-column: 1/-1; text-align:center;'>–ü–æ–∫–∏ —â–æ –ø—É—Å—Ç–æ...</p>";
                return;
            }
            inventory.slice().reverse().forEach(item => { // –ü–æ–∫–∞–∑—É—î–º–æ –Ω–æ–≤—ñ –∑–≤–µ—Ä—Ö—É
                const div = document.createElement('div');
                div.className = `item ${item.rarity}`;
                div.innerHTML = `<div style="font-size:24px; margin-bottom:5px;">${item.icon}</div><div>${item.name}</div>`;
                container.appendChild(div);
            });
        }

        // --- –¢–ê–ô–ú–ï–† –†–û–ó–Ü–ì–†–ê–®–£ ---
        
        let giveawayEndTime = localStorage.getItem('giveaway_timer_v2');
        if (!giveawayEndTime || new Date().getTime() > giveawayEndTime) { resetTimer(); }

        function resetTimer() {
            // 3 —Ö–≤–∏–ª–∏–Ω–∏ –¥–ª—è —Ç–µ—Å—Ç—É (–º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –Ω–∞ –±—ñ–ª—å—à–µ)
            giveawayEndTime = new Date().getTime() + (3 * 60 * 1000); 
            localStorage.setItem('giveaway_timer_v2', giveawayEndTime);
            document.getElementById('claimBtn').classList.remove('active');
            document.getElementById('claimBtn').innerText = "–ß–ï–ö–ê–ô–¢–ï –¢–ê–ô–ú–ï–†";
        }

        setInterval(() => {
            const now = new Date().getTime();
            const distance = giveawayEndTime - now;
            if (distance < 0) {
                document.getElementById('timer').innerText = "–ì–û–¢–û–í–û!";
                const btn = document.getElementById('claimBtn');
                if (!btn.classList.contains('active')) {
                    btn.classList.add('active');
                    btn.innerText = "üéÅ –ó–ê–ë–†–ê–¢–ò –ü–†–ò–ó! üéÅ";
                }
            } else {
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);
                document.getElementById('timer').innerText = 
                    (minutes < 10 ? "0" : "") + minutes + ":" + (seconds < 10 ? "0" : "") + seconds;
            }
        }, 1000);

        function claimGiveaway() {
            const prize = getRandomItemByRarity(Math.random() > 0.7 ? 'legendary' : 'epic');
            inventory.push(prize);
            updateUI();
            showWin(prize);
            resetTimer();
        }

        // –ó–∞–ø—É—Å–∫
        updateUI();
    </script>
</body>
</html>

